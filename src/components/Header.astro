---
import { getButtonClass } from "./Button/getButtonClass";
import { Bars3Icon } from "./Icons";
import { XMarkIcon } from "./Icons";
import { ChevronDownIcon } from "./Icons";
---

<header
	class="sticky top-0 z-50 w-full border-b border-gray-800 bg-black/80 backdrop-blur-sm"
	x-data="{ isMenuOpen: false }"
>
	<div class="container mx-auto flex h-16 items-center justify-between px-4">
		<div class="flex items-center gap-2">
			<a href="/" class="flex items-center gap-2">
				<span class="text-2xl font-bold text-white">
					<span class="text-purple-400">Escape</span> Reality
				</span>
			</a>
		</div>

		<nav class="hidden md:flex items-center gap-8">
			<a
				href="/"
				class="font-medium text-white hover:text-purple-400 transition-colors"
			>
				Home
			</a>

			<div class="relative" @click.outside="isMenuOpen = false">
				<button
					@click="isMenuOpen = !isMenuOpen"
					@mouseenter="isMenuOpen = true"
					class="flex items-center gap-1 font-medium text-white hover:text-purple-400 transition-colors"
				>
					Our Games
					<ChevronDownIcon
						class="h-4 w-4 stroke-2 -mr-2 transition-transform"
						:class="{ 'rotate-180': isMenuOpen }"
					/>
				</button>

				<div
					x-show="isMenuOpen"
					x-transition
					@mouseleave="isMenuOpen = false"
					class="absolute left-1/2 -translate-x-1/2 mt-2 w-48 bg-gray-900 border border-gray-800 rounded shadow-lg z-50"
				>
					<a
						href="/games"
						class="block px-4 py-2 text-sm text-white hover:bg-gray-800 transition"
						>All Games</a
					>
					<a
						href="/games#murder-mystery"
						class="block px-4 py-2 text-sm text-white hover:bg-gray-800 transition"
						@click="isMenuOpen = false">Clue Dunnit?</a
					>
					<a
						href="/games#fbi-operation"
						class="block px-4 py-2 text-sm text-white hover:bg-gray-800 transition"
						@click="isMenuOpen = false">FBI & the Toxic Takedown</a
					>
					<a
						href="/games#brewery-heist"
						class="block px-4 py-2 text-sm text-white hover:bg-gray-800 transition"
						@click="isMenuOpen = false">Brewery Heist</a
					>
				</div>
			</div>

			<a
				href="/gift-cards"
				class="font-medium text-white hover:text-purple-400 transition-colors"
			>
				Gift Cards
			</a>
			<a
				href="/faq"
				class="font-medium text-white hover:text-purple-400 transition-colors"
			>
				FAQ
			</a>
			<a
				href="/contact"
				class="font-medium text-white hover:text-purple-400 transition-colors"
			>
				Contact
			</a>
			<a
				href="/blog"
				class="font-medium text-white hover:text-purple-400 transition-colors"
			>
				Blog
			</a>
		</nav>

		<a
			href="https://bookeo.com/escaperealityfl"
			target="_blank"
			rel="noopener noreferrer"
			class={getButtonClass({ class: "hidden md:flex" })}>Book Now</a
		>

		<button class="block md:hidden" @click="isMenuOpen = !isMenuOpen">
			<XMarkIcon class="h-6 w-6 text-white" x-show="isMenuOpen" />
			<Bars3Icon class="h-6 w-6 text-white" x-show="!isMenuOpen" />
		</button>
	</div>

	<!-- Mobile Menu -->
	<div
		class="md:hidden absolute top-16 w-full border-gray-800 border-t bg-black/80 z-50"
		x-show="isMenuOpen"
		x-transition:enter="transition ease-out duration-150"
		x-transition:enter-start="opacity-0 -translate-y-2"
		x-transition:enter-end="opacity-100 translate-y-0"
		x-transition:leave="transition ease-in duration-75"
		x-transition:leave-start="opacity-100 translate-y-0"
		x-transition:leave-end="opacity-0 -translate-y-2"
	>
		<div class="container px-4 py-4 flex flex-col gap-4">
			<a
				href="/"
				class="text-sm font-medium text-white hover:text-purple-400 transition-colors py-2"
				@click="isMenuOpen = false">Home</a
			>
			<a
				href="/games"
				class="text-sm font-medium text-white hover:text-purple-400 transition-colors py-2"
				@click="isMenuOpen = false">Our Games</a
			>
			<a
				href="/gift-cards"
				class="text-sm font-medium text-white hover:text-purple-400 transition-colors py-2"
				@click="isMenuOpen = false">Gift Cards</a
			>
			<a
				href="/faq"
				class="text-sm font-medium text-white hover:text-purple-400 transition-colors py-2"
				@click="isMenuOpen = false">FAQ</a
			>
			<a
				href="/contact"
				class="text-sm font-medium text-white hover:text-purple-400 transition-colors py-2"
				@click="isMenuOpen = false">Contact</a
			>
			<a
				href="/blog"
				class="text-sm font-medium text-white hover:text-purple-400 transition-colors py-2"
				@click="isMenuOpen = false">Blog</a
			>
			<a
				href="https://bookeo.com/escaperealityfl"
				target="_blank"
				rel="noopener noreferrer"
				@click="isMenuOpen = false"
				class={getButtonClass({
					class: "mt-2",
				})}>Book Now</a
			>
		</div>
	</div>
</header>
