---
import { SignalIcon } from "lucide-react";

interface Props {
	index: number;
	id: string;
	player: string;
	message: string;
	signal: number;
}

const { index, signal, id, message, player } = Astro.props;
---

<div
	class="invisible md:absolute"
	:class="isVisible && 'animate-in fade-in-0 blur-in-[1px] zoom-in-80 visible will-change-transform antialiased'"
	style={{
		top: `${index * 20}%`,
		left:
			index === 5
				? "0%"
				: `${index % 2 === 0 ? (index * 10) % 50 : 50 + ((index * 10) % 40)}%`,
		transform: `rotate(${index % 2 === 0 ? -2 : 2}deg)`,
		"--tw-duration":
			index === 0
				? "1s"
				: index === 1
					? "1.25s"
					: index === 2
						? "1.5s"
						: index === 3
							? "2.75s"
							: "3s",
	}}
>
	<div
		class="bg-background cursor-default border border-primary/20 rounded p-4 max-w-[400px] transition-all duration-300 group hover:border-primary/50 hover:shadow-[0_0_20px_color-mix(in_oklab,var(--primary)_30%,transparent)] md:max-w-xs"
	>
		<div
			class="flex items-center justify-between mb-3 pb-2 border-b border-primary/20"
		>
			<div class="flex items-center gap-2">
				<SignalIcon className="size-4 text-primary group-hover:animate-pulse" />
				<span class="text-xs text-primary">
					{signal}%
				</span>
			</div>
			<span class="text-xs text-muted-foreground">
				{id}
			</span>
		</div>
		<p class="text-sm text-foreground mb-3 leading-relaxed">
			&ldquo;{message}&rdquo;
		</p>
		<div class="text-xs text-muted-foreground">
			PLAYER: {player}
		</div>
		<div
			class="absolute top-0 right-0 w-3 h-3 bg-accent/50 transition-colors group-hover:bg-accent"
		>
		</div>
		<div
			class="absolute bottom-0 left-0 w-2 h-2 bg-secondary/50 transition-colors group-hover:bg-secondary"
			style={{ animationDelay: "0.2s" }}
		>
		</div>
	</div>
</div>
