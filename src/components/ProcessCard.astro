---
import type { LucideProps } from "lucide-react";

interface Props {
	arrLength: number;
	index: number;
	icon: React.ForwardRefExoticComponent<
		Omit<LucideProps, "ref"> & React.RefAttributes<SVGSVGElement>
	>;
	code: string;
	title: string;
	description: string;
}

const { arrLength, index, icon: Icon, code, title, description } = Astro.props;
---

<div
	x-data="{ isVisible: undefined }"
	x-intersect.threshold.70="isVisible = true"
	class="invisible"
	:class="isVisible && 'animate-in fade-in-0 slide-in-from-bottom-20 visible'"
	style={{
		"--tw-duration":
			index === 0
				? "1s"
				: index === 1
					? "1.35s"
					: index === 2
						? "1.65s"
						: index === 3
							? "1.95s"
							: "2.25s",
	}}
>
	<div class="relative group h-full">
		{
			index < arrLength - 1 && (
				<div class="hidden lg:block absolute top-1/2 left-full w-full h-0.5 bg-linear-to-r from-primary/50 to-transparent -translate-y-1/2" />
			)
		}
		<div
			class="relative h-full p-6 bg-background rounded border border-primary/20 hover:border-primary/50 transition-all duration-300 hover:shadow-[0_0_30px_color-mix(in_oklab,var(--primary)_30%,transparent)] group-hover:-translate-y-1 cursor-default"
		>
			<div class="bg-card">
				<div
					class="absolute -top-3 -left-3 size-8 bg-primary text-primary-foreground rounded text-sm flex items-center justify-center"
				>
					{index + 1}
				</div>
				<div class="mb-4 flex justify-center">
					<div
						class="size-16 rounded-full border-2 border-primary/30 flex items-center justify-center group-hover:animate-pulse-glow transition-all"
					>
						<Icon className="size-8 text-primary" />
					</div>
				</div>
				<div class="mb-3 text-center">
					<span class="text-xs text-primary bg-primary/10 px-3 py-1 rounded">
						{code}
					</span>
				</div>
				<h3 class="text-xl mb-3 text-center">{title}</h3>
				<p class="text-sm text-muted-foreground text-center leading-relaxed">
					{description}
				</p>
				<div
					class="absolute bottom-0 right-0 size-6 border-r-2 border-b-2 border-accent/30 group-hover:border-accent transition-colors"
				>
				</div>
			</div>
		</div>
	</div>
</div>
